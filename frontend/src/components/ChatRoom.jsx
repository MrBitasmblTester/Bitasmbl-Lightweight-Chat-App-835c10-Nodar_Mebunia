import React,{useEffect,useState,useRef} from 'react';\nimport { io } from 'socket.io-client';\nexport default function ChatRoom({room,anonId}){\n const [messages,setMessages]=useState([]); const socketRef=useRef();\n useEffect(()=>{ const s=io(); socketRef.current=s; s.on('connect',()=>s.emit('join_room',{room,anonId})); s.on('history',setMessages); s.on('message',m=>setMessages(a=>[...a,m])); s.on('system',m=>setMessages(a=>[...a,{system:true,...m,timestamp:Date.now()}])); return ()=>s.disconnect(); },[room,anonId]);\n const send=text=>socketRef.current.emit('send_message',{room,text,anonId});\n return (<div><h4>Room: {room}</h4></div>);\n}