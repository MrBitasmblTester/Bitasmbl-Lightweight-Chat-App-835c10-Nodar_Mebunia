const rooms = {};\nmodule.exports = {\n  joinRoom(room,id){ rooms[room]=rooms[room]||{members:{},messages:[]}; rooms[room].members[id]=true; return rooms[room]; },\n  leaveRoom(room,id){ if(rooms[room]) delete rooms[room].members[id]; },\n  addMessage(room,msg){ rooms[room]=rooms[room]||{members:{},messages:[]}; rooms[room].messages.push(msg); },\n  getMessages(room){ return (rooms[room]&&rooms[room].messages)||[] }\n};